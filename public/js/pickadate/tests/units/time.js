var $DOM=$("#qunit-fixture"),$INPUT=$("<input type=password>");module("Time picker setup",{setup:function(){$DOM.append($INPUT.clone());var e=$DOM.find("input").pickatime();this.picker=e.pickatime("picker")},teardown:function(){this.picker.stop(),$DOM.empty()}}),test("Clock stage",function(){strictEqual(this.picker.$root.find("[data-pick]").length,48,"48 selectable times")}),test("Properties",function(){var e=this.picker,t=new Date,i=e.get("interval"),a=60*t.getHours()+t.getMinutes();strictEqual(i,30,"Default interval is 30"),strictEqual(e.get("min").pick,0,"Default “min” is midnight"),strictEqual(e.get("max").pick,1410,"Default “max” is 23:30"),strictEqual(e.get("now").pick,(i+a-a%i)%1440,"Default “now” is: "+e.get("now","HH:i")),deepEqual(e.get("select"),null,"Default “select” is `null`"),deepEqual(e.get("highlight"),e.get("now"),"Default “highlight” is “now”"),deepEqual(e.get("view"),e.get("highlight"),"Default “view” is “highlight”")}),test("Formats",function(){var e=this.picker,t=$.fn.pickatime.defaults.interval,i=new Date,a=60*i.getHours()+i.getMinutes(),l=function(e){return(e<10?"0":"")+e},s=function(e){var t=~~(e/60)%12;return t||12},n={h:function(){return""+s(a)},hh:function(){return l(s(a))},H:function(){return""+~~(a/60)%24},HH:function(){return l(~~(a/60)%24)},i:function(){return l(a%60)},a:function(){return~~(a/60)%24>12?"p.m.":"a.m."},A:function(){return~~(a/60)%24>12?"PM":"AM"}};a=t+a-a%t,["h","hh","H","HH","i","a","A"].forEach(function(t){var i=n[t]();deepEqual(e.get("now",t),i,"`"+t+"`: "+i)})}),module("Time picker setup",{teardown:function(){$DOM.empty()}}),test("Editable",function(){$DOM.append($INPUT.clone()).append($INPUT.clone());var e=$DOM.find("input").eq(0).pickatime(),t=$DOM.find("input").eq(1).pickatime({editable:!0});strictEqual(e[0].readOnly,!0,"Editable: false"),strictEqual(t[0].readOnly,!1,"Editable: true")}),module("Time picker `set`",{setup:function(){$DOM.append($INPUT.clone());var e=$DOM.find("input").pickatime();this.picker=e.pickatime("picker")},teardown:function(){this.picker.stop(),$DOM.empty()}}),test("`interval`",function(){var e=this.picker,t=e.$root;e.set("interval",120),strictEqual(e.get("interval"),120,"`interval` updated"),strictEqual(e.get("min").pick%120,0,"`min` updated"),strictEqual(e.get("max").pick%120,0,"`max` updated"),strictEqual(t.find("."+$.fn.pickatime.defaults.klass.listItem).length,12,"12 selectable times"),e.set("interval","lol"),strictEqual(e.get("interval"),120,"Interval unaffected by non-integer")}),test("`clear`",function(){var e=this.picker;strictEqual(e.get("select"),null,"Starts off without a selection"),e.set("select",new Date),notStrictEqual(e.get("select"),null,"A selection has been added"),e.clear(),strictEqual(e.get("select"),null,"Clears out selection")}),test("`select`",function(){var e=this.picker;e.set("select",180),strictEqual(e.get("select").pick,180,"`select` using a number: "+e.get("select","HH:i")),strictEqual(e.get("highlight").pick,180,"`highlight` updated"),strictEqual(e.get("view").pick,180,"`view` updated"),strictEqual(e.get("min").pick,0,"`min` unaffected"),strictEqual(e.get("max").pick,1410,"`max` unaffected");var t=new Date;t.setHours(4,20),e.set("select",t),strictEqual(e.get("select").pick,270,"`select` using a JS date object: "+e.get("select","HH:i")),strictEqual(e.get("highlight").pick,270,"`highlight` updated"),strictEqual(e.get("view").pick,270,"`view` updated"),strictEqual(e.get("min").pick,0,"`min` unaffected"),strictEqual(e.get("max").pick,1410,"`max` unaffected"),e.set("select",[9,0]),strictEqual(e.get("select").pick,540,"`select` using an array: "+e.get("select","HH:i")),strictEqual(e.get("highlight").pick,540,"`highlight` updated"),strictEqual(e.get("view").pick,540,"`view` updated"),strictEqual(e.get("min").pick,0,"`min` unaffected"),strictEqual(e.get("max").pick,1410,"`max` unaffected")}),test("`highlight`",function(){var e=this.picker;e.set("highlight",180),strictEqual(e.get("highlight").pick,180,"`highlight` using a number: "+e.get("highlight","HH:i")),deepEqual(e.get("view"),e.get("highlight"),"`view` updated"),strictEqual(e.get("select"),null,"`select` unaffected"),strictEqual(e.get("min").pick,0,"`min` unaffected"),strictEqual(e.get("max").pick,1410,"`max` unaffected");var t=new Date;t.setHours(4,20),e.set("highlight",t),strictEqual(e.get("highlight").pick,270,"`highlight` using a JS date object: "+e.get("highlight","HH:i")),deepEqual(e.get("view"),e.get("highlight"),"`view` updated"),strictEqual(e.get("select"),null,"`select` unaffected"),strictEqual(e.get("min").pick,0,"`min` unaffected"),strictEqual(e.get("max").pick,1410,"`max` unaffected"),e.set("highlight",[9,0]),strictEqual(e.get("highlight").pick,540,"`highlight` using an array: "+e.get("highlight","HH:i")),deepEqual(e.get("view"),e.get("highlight"),"`view` updated"),strictEqual(e.get("select"),null,"`select` unaffected"),strictEqual(e.get("min").pick,0,"`min` unaffected"),strictEqual(e.get("max").pick,1410,"`max` unaffected")}),test("`view`",function(){var e=this.picker;e.set("view",180),strictEqual(e.get("view").pick,180,"`view` using a number: "+e.get("view","HH:i")),strictEqual(e.get("highlight").pick,e.get("now").pick,"`highlight` unaffected"),strictEqual(e.get("select"),null,"`select` unaffected"),strictEqual(e.get("min").pick,0,"`min` unaffected"),strictEqual(e.get("max").pick,1410,"`max` unaffected");var t=new Date;t.setHours(4,20),e.set("view",t),strictEqual(e.get("view").pick,270,"`view` using a JS date object: "+e.get("view","HH:i")),strictEqual(e.get("highlight").pick,e.get("now").pick,"`highlight` unaffected"),strictEqual(e.get("select"),null,"`select` unaffected"),strictEqual(e.get("min").pick,0,"`min` unaffected"),strictEqual(e.get("max").pick,1410,"`max` unaffected"),e.set("view",[9,0]),strictEqual(e.get("view").pick,540,"`view` using an array: "+e.get("view","HH:i")),strictEqual(e.get("highlight").pick,e.get("now").pick,"`highlight` unaffected"),strictEqual(e.get("select"),null,"`select` unaffected"),strictEqual(e.get("min").pick,0,"`min` unaffected"),strictEqual(e.get("max").pick,1410,"`max` unaffected")}),test("`min` using integers",function(){var e=this.picker;e.set("min",-3),strictEqual((e.get("min").pick+90)%1440,e.get("now").pick,"`min` using a negative number: "+e.get("min","HH:i")),deepEqual(e.get("select"),null,"`select` unaffected"),e.get("min").pick>e.get("now").pick?(deepEqual(e.get("highlight"),e.get("min"),"`highlight` updated"),deepEqual(e.get("view"),e.get("min"),"`view` updated")):(strictEqual(e.get("highlight").pick,e.get("now").pick,"`highlight` unaffected"),strictEqual(e.get("view").pick,e.get("now").pick,"`view` unaffected")),strictEqual(e.get("max").pick,1410,"`max` unaffected");var t=e.get("highlight"),i=e.get("view");e.set("min",3),strictEqual(e.get("min").pick,(e.get("now").pick+90)%1440,"`min` using a positive number: "+e.get("min","HH:i")),deepEqual(e.get("select"),null,"`select` unaffected"),strictEqual(e.get("max").pick,1410,"`max` unaffected"),e.get("highlight").pick!==t.pick?(deepEqual(e.get("highlight").pick,e.get("min").pick,"`highlight` updated"),deepEqual(e.get("view").pick,e.get("min").pick,"`view` updated")):(deepEqual(e.get("highlight").pick,t.pick,"`highlight` unaffected"),deepEqual(e.get("view").pick,i.pick,"`view` unaffected"))}),test("`min` using booleans",function(){var e=this.picker;e.set("min",!0),deepEqual(e.get("min"),e.get("now"),"`min` using `true`: "+e.get("min","HH:i")),deepEqual(e.get("select"),null,"`select` unaffected"),deepEqual(e.get("highlight"),e.get("min"),"`highlight` updated"),deepEqual(e.get("view"),e.get("min"),"`view` updated"),deepEqual(e.get("max").time,1410,"`max` unaffected"),e.set("min",!1),strictEqual(e.get("min").time,0,"`min` using `false`: "+e.get("min","HH:i")),deepEqual(e.get("select"),null,"`select` unaffected"),deepEqual(e.get("highlight"),e.get("now"),"`highlight` unaffected"),deepEqual(e.get("view"),e.get("now"),"`view` unaffected"),deepEqual(e.get("max").time,1410,"`max` unaffected")}),test("`min` using arrays",function(){var e=this.picker;e.set("min",[2,0]),strictEqual(e.get("min").pick,120,"`min` using an array: "+e.get("min","HH:i")),deepEqual(e.get("select"),null,"`select` unaffected"),e.get("min").pick>e.get("now").pick?(deepEqual(e.get("highlight"),e.get("min"),"`highlight` updated"),deepEqual(e.get("view"),e.get("min"),"`view` updated")):(deepEqual(e.get("highlight"),e.get("now"),"`highlight` unaffected"),deepEqual(e.get("view"),e.get("highlight"),"`view` updated")),deepEqual(e.get("max").pick,1410,"`max` unaffected")}),test("`min` using JS dates",function(){var e=this.picker,t=new Date;t.setHours(4,30),e.set("min",t),strictEqual(e.get("min").pick,270,"`min` using a JS date: "+e.get("min","HH:i")),deepEqual(e.get("select"),null,"`select` unaffected"),e.get("min").pick>e.get("now").pick?(deepEqual(e.get("highlight"),e.get("min"),"`highlight` updated"),deepEqual(e.get("view"),e.get("min"),"`view` updated")):(deepEqual(e.get("highlight"),e.get("now"),"`highlight` unaffected"),deepEqual(e.get("view"),e.get("highlight"),"`view` updated")),deepEqual(e.get("max").pick,1410,"`max` updated")}),test("`min` using strings",function(){var e=this.picker,t=e.get("min");strictEqual(t.pick,0,"No `min` time"),e.set("min","3:30 PM"),t=e.get("min"),deepEqual([t.hour,t.mins],[15,30],"`min` updated")}),test("`max` using integers",function(){var e=this.picker;e.set("max",3),strictEqual(e.get("max").pick,(e.get("now").pick+90)%1440,"`max` using a positive number: "+e.get("max","HH:i")),strictEqual(e.get("min").pick,0,"`min` unaffected"),deepEqual(e.get("select"),null,"`select` unaffected"),e.get("max").pick<e.get("now").pick?(deepEqual(e.get("highlight"),e.get("max"),"`highlight` updated"),deepEqual(e.get("view"),e.get("max"),"`view` updated")):(deepEqual(e.get("highlight"),e.get("now"),"`highlight` unaffected"),deepEqual(e.get("view"),e.get("now"),"`view` unaffected"));var t=e.get("highlight");e.set("max",-3);var i=e.get("now").pick+-90;i+=i<0?1440:0,strictEqual(e.get("max").pick,i,"`max` using a negative number: "+e.get("max","HH:i")),deepEqual(e.get("select"),null,"`select` unaffected"),strictEqual(e.get("min").pick,0,"`min` unaffected"),e.get("highlight").pick===i?(deepEqual(e.get("highlight"),e.get("max"),"`highlight` updated"),deepEqual(e.get("view"),e.get("max"),"`view` updated")):(deepEqual(e.get("highlight"),t,"`highlight` unaffected"),deepEqual(e.get("view"),t,"`view` unaffected"))}),test("`max` using booleans",function(){var e=this.picker;e.set("max",!0),deepEqual(e.get("max"),e.get("now"),"`max` using `true`: "+e.get("max","HH:i")),strictEqual(e.get("select"),null,"`select` unaffected"),strictEqual(e.get("highlight").pick,e.get("now").pick,"`highlight` unaffected"),deepEqual(e.get("view"),e.get("highlight"),"`view` unaffected"),strictEqual(e.get("min").pick,0,"`min` unaffected"),e.set("max",!1),deepEqual(e.get("max").pick,1410,"`max` using `false`: "+e.get("max","HH:i")),strictEqual(e.get("select"),null,"`select` unaffected"),strictEqual(e.get("highlight").pick,e.get("now").pick,"`highlight` unaffected"),deepEqual(e.get("view"),e.get("highlight"),"`view` unaffected"),strictEqual(e.get("min").pick,0,"`min` unaffected")}),test("`max` using arrays",function(){var e=this.picker;e.set("max",[14,30]),strictEqual(e.get("max").pick,870,"`max` using an array: "+e.get("max","HH:i")),strictEqual(e.get("select"),null,"`select` unaffected"),e.get("max").pick<e.get("now").pick?(deepEqual(e.get("highlight"),e.get("max"),"`highlight` updated"),deepEqual(e.get("view"),e.get("highlight"),"`view` updated")):(deepEqual(e.get("highlight"),e.get("now"),"`highlight` unaffected"),deepEqual(e.get("view"),e.get("highlight"),"`view` unaffected")),strictEqual(e.get("min").pick,0,"`min` unaffected")}),test("`max` using JS dates",function(){var e=this.picker,t=new Date;t.setHours(16,20),e.set("max",t),strictEqual(e.get("max").pick,960,"`max` using a JS date: "+e.get("max","HH:i")),deepEqual(e.get("select"),null,"`select` unaffected"),e.get("max").pick<e.get("now").pick?(deepEqual(e.get("highlight"),e.get("max"),"`highlight` updated"),deepEqual(e.get("view"),e.get("highlight"),"`view` updated")):(deepEqual(e.get("highlight"),e.get("now"),"`highlight` unaffected"),deepEqual(e.get("view"),e.get("highlight"),"`view` unaffected")),deepEqual(e.get("min").pick,0,"`min` unaffected")}),test("`max` using strings",function(){var e=this.picker,t=e.get("max");strictEqual(t.pick,1410,"No `max` time"),e.set("max","3:30 PM"),t=e.get("max"),deepEqual([t.hour,t.mins],[15,30],"`max` updated")}),test("`disable` and `enable` using integers",function(){var e=[1,4,7],t=this.picker,i=t.$root;t.set("disable",e),deepEqual(t.get("disable"),e,"Disabled times added"),i.find("[data-pick]").each(function(){var t=$(this),i=~~(t.data("pick")/60);e.indexOf(i)>-1?ok(t.hasClass($.fn.pickatime.defaults.klass.disabled),"Disabled time: "+t.html()):ok(!t.hasClass($.fn.pickatime.defaults.klass.disabled),"Enabled time: "+t.html())}),t.set("enable",[1]),deepEqual(t.get("disable"),[4,7],"Disabled time removed"),i.find("[data-pick]").each(function(){var e=$(this),t=~~(e.data("pick")/60);[4,7].indexOf(t)>-1?ok(e.hasClass($.fn.pickatime.defaults.klass.disabled),"Disabled time: "+e.html()):ok(!e.hasClass($.fn.pickatime.defaults.klass.disabled),"Enabled time: "+e.html())}),t.set("enable","flip"),deepEqual(t.get("disable"),[4,7],"Disabled collection `enable` flipped"),i.find("[data-pick]").each(function(){var e=$(this),t=~~(e.data("pick")/60);[4,7].indexOf(t)<0?ok(e.hasClass($.fn.pickatime.defaults.klass.disabled),"Disabled time: "+e.html()):ok(!e.hasClass($.fn.pickatime.defaults.klass.disabled),"Enabled time: "+e.html())}),t.set("disable","flip"),deepEqual(t.get("disable"),[4,7],"Disabled collection `disable` flipped"),i.find("[data-pick]").each(function(){var e=$(this),t=~~(e.data("pick")/60);[4,7].indexOf(t)>-1?ok(e.hasClass($.fn.pickatime.defaults.klass.disabled),"Disabled time: "+e.html()):ok(!e.hasClass($.fn.pickatime.defaults.klass.disabled),"Enabled time: "+e.html())})}),test("`disable` and `enable` using arrays",function(){var e=this.picker,t=e.$root,i=[[1,0],[18,0],[23,30],[4,30]];e.set("disable",i),deepEqual(e.get("disable"),i,"Disabled times added"),t.find("."+$.fn.pickatime.defaults.klass.listItem).each(function(e,t){2===e||9===e||36===e||47===e?ok($(t).hasClass($.fn.pickatime.defaults.klass.disabled),"Time is disabled: "+t.innerHTML):ok(!$(t).hasClass($.fn.pickatime.defaults.klass.disabled),"Time is enabled: "+t.innerHTML)}),i.pop(),e.set("enable",[[4,30]]),deepEqual(e.get("disable"),i,"Disabled time removed"),t.find("."+$.fn.pickatime.defaults.klass.listItem).each(function(e,t){2===e||36===e||47===e?ok($(t).hasClass($.fn.pickatime.defaults.klass.disabled),"Time is disabled: "+t.innerHTML):ok(!$(t).hasClass($.fn.pickatime.defaults.klass.disabled),"Time is enabled: "+t.innerHTML)}),e.set("enable","flip"),deepEqual(e.get("disable"),i,"Disabled collection `enable` flipped"),deepEqual(e.get("enable"),-1,"Base state disabled"),t.find("[data-pick]").each(function(e,t){2!==e&&36!==e&&47!==e?ok($(t).hasClass($.fn.pickatime.defaults.klass.disabled),"Time is disabled: "+t.innerHTML):ok(!$(t).hasClass($.fn.pickatime.defaults.klass.disabled),"Time is enabled: "+t.innerHTML)}),e.set("disable","flip"),deepEqual(e.get("disable"),i,"Disabled collection `disable` flipped"),deepEqual(e.get("enable"),1,"Base state enabled"),t.find("[data-pick]").each(function(e,t){2===e||36===e||47===e?ok($(t).hasClass($.fn.pickatime.defaults.klass.disabled),"Time is disabled: "+t.innerHTML):ok(!$(t).hasClass($.fn.pickatime.defaults.klass.disabled),"Time is enabled: "+t.innerHTML)}),e.set("disable",[1]);var a=[1,30];e.set("enable",[a]),a.push("inverted"),i=i.concat([1,a]),deepEqual(e.get("disable"),i,"Disabled collection with specified time inverted")}),test("`disable` and `enable` using JS times",function(){var e=[new Date(2014,2,2,1),new Date(2014,2,2,17,30),new Date(2014,2,2,3)],t=this.picker,i=t.$root;t.set("disable",e),deepEqual(t.get("disable"),e,"Disabled times added"),i.find("."+$.fn.pickatime.defaults.klass.listItem).each(function(e,t){2===e||6===e||35===e?ok($(t).hasClass($.fn.pickatime.defaults.klass.disabled),"Time is disabled: "+t.innerHTML):ok(!$(t).hasClass($.fn.pickatime.defaults.klass.disabled),"Time is enabled: "+t.innerHTML)}),t.set("enable",[new Date(2014,2,2,17,30)]),deepEqual(t.get("disable"),[new Date(2014,2,2,1),new Date(2014,2,2,3)],"Disabled time removed"),i.find("."+$.fn.pickatime.defaults.klass.listItem).each(function(e,t){2===e||6===e?ok($(t).hasClass($.fn.pickatime.defaults.klass.disabled),"Time is disabled: "+t.innerHTML):ok(!$(t).hasClass($.fn.pickatime.defaults.klass.disabled),"Time is enabled: "+t.innerHTML)}),t.set("enable","flip"),deepEqual(t.get("disable"),[new Date(2014,2,2,1),new Date(2014,2,2,3)],"Disabled collection `enable` flipped"),i.find("[data-pick]").each(function(e,t){2!==e&&6!==e?ok($(t).hasClass($.fn.pickatime.defaults.klass.disabled),"Time is disabled: "+t.innerHTML):ok(!$(t).hasClass($.fn.pickatime.defaults.klass.disabled),"Time is enabled: "+t.innerHTML)}),t.set("disable","flip"),deepEqual(t.get("disable"),[new Date(2014,2,2,1),new Date(2014,2,2,3)],"Disabled collection `disable` flipped"),i.find("[data-pick]").each(function(e,t){2===e||6===e?ok($(t).hasClass($.fn.pickatime.defaults.klass.disabled),"Time is disabled: "+t.innerHTML):ok(!$(t).hasClass($.fn.pickatime.defaults.klass.disabled),"Time is enabled: "+t.innerHTML)})}),test("`disable` and `enable` using booleans",function(){var e=this.picker,t=e.$root,i=[[1,0],[4,30],[18,0],[23,30]];e.set("disable",i),deepEqual(e.get("disable"),i,"Disabled times added to collection"),e.set("disable",!1),deepEqual(e.get("disable"),[],"Disabled collection reset"),strictEqual(t.find("."+$.fn.pickatime.defaults.klass.disabled).length,0,"No times disabled"),e.set("disable",i),deepEqual(e.get("disable"),i,"Disabled times added to collection"),e.set("disable",!0),deepEqual(e.get("disable"),[],"Disabled collection reset"),deepEqual(e.get("enable"),-1,"Disabled collection `enable` flipped"),strictEqual(t.find("."+$.fn.pickatime.defaults.klass.disabled).length,48,"All times disabled"),e.set("enable","flip"),deepEqual(e.get("enable"),1,"Disabled collection `enable` flipped"),e.set("disable",i),deepEqual(e.get("disable"),i,"Disabled times added to collection"),e.set("enable",!0),deepEqual(e.get("disable"),[],"Disabled collection reset"),strictEqual(t.find("."+$.fn.pickatime.defaults.klass.disabled).length,0,"No times disabled"),e.set("disable",i),deepEqual(e.get("disable"),i,"Disabled times added to collection"),e.set("enable",!1),deepEqual(e.get("disable"),[],"Disabled collection reset"),deepEqual(e.get("enable"),-1,"Disabled collection `enable` flipped"),strictEqual(t.find("."+$.fn.pickatime.defaults.klass.disabled).length,48,"All times disabled")}),test("`disable` and `enable` using ranges",function(){var e,t=this.picker,i=t.$root;e=[{from:[2,0],to:[14,30]}],t.set("disable",e),deepEqual(t.get("disable"),e,"Disabled range"),i.find("[data-pick]").each(function(e,t){e>=4&&e<=29?ok($(t).hasClass($.fn.pickatime.defaults.klass.disabled),"Time is disabled: "+t.innerHTML):ok(!$(t).hasClass($.fn.pickatime.defaults.klass.disabled),"Time is enabled: "+t.innerHTML)}),t.set("enable",e),deepEqual(t.get("disable"),[],"Cleared disabled range"),strictEqual(i.find("."+$.fn.pickatime.defaults.klass.disabled).length,0,"No times disabled"),e=[{from:new Date(2014,2,7,5,30),to:new Date(2014,2,7,19)}],t.set("disable",e),deepEqual(t.get("disable"),e,"Disabled range updated"),i.find("[data-pick]").each(function(e,t){e>=11&&e<=38?ok($(t).hasClass($.fn.pickatime.defaults.klass.disabled),"Time is disabled: "+t.innerHTML):ok(!$(t).hasClass($.fn.pickatime.defaults.klass.disabled),"Time is enabled: "+t.innerHTML)}),t.set("enable",e),deepEqual(t.get("disable"),[],"Cleared disabled range"),strictEqual(i.find("."+$.fn.pickatime.defaults.klass.disabled).length,0,"No times disabled")}),test("`disable` and `enable` using relative ranges",function(){var e,t=this.picker,i=t.$root,a=t.get("now"),l=t.get("interval"),s=[a.hour,a.mins-10*l];e=[{from:!0,to:[a.hour,a.mins+10*l]}],t.set("disable",e),deepEqual(t.get("disable"),e,"Disabled range relative to now with date object"),t.set("enable",e),deepEqual(t.get("disable"),[],"Cleared disabled range"),strictEqual(i.find("."+$.fn.pickatime.defaults.klass.disabled).length,0,"No times disabled"),e=[{from:s,to:!0}],t.set("disable",e),deepEqual(t.get("disable"),e,"Disabled range relative to now with array"),t.set("enable",e),deepEqual(t.get("disable"),[],"Cleared disabled range"),strictEqual(i.find("."+$.fn.pickatime.defaults.klass.disabled).length,0,"No times disabled"),e=[{from:!0,to:10}],t.set("disable",e),deepEqual(t.get("disable"),e,"Disabled range relative to now with positive integer"),t.set("enable",e),deepEqual(t.get("disable"),[],"Cleared disabled range"),strictEqual(i.find("."+$.fn.pickatime.defaults.klass.disabled).length,0,"No times disabled"),e=[{from:-10,to:!0}],t.set("disable",e),deepEqual(t.get("disable"),e,"Disabled range relative to now with negative integer")}),test("`disable` and `enable` using overlapping ranges",function(){var e=this.picker,t=e.$root;e.set("disable",[{from:[2,0],to:[10,30]}]),e.set("enable",[{from:[5,30],to:[7,30]}]),disableCollection=[{from:[2,0],to:[10,30]},{from:[5,30],to:[7,30],inverted:!0}],deepEqual(e.get("disable"),disableCollection,"Inverted range within disabled range"),t.find("[data-pick]").each(function(e,t){e>=4&&e<11||e>15&&e<=21?ok($(t).hasClass($.fn.pickatime.defaults.klass.disabled),"Time is disabled: "+t.innerHTML):ok(!$(t).hasClass($.fn.pickatime.defaults.klass.disabled),"Time is enabled: "+t.innerHTML)}),e.set("disable",!1),e.set("disable",[{from:[2,0],to:[10,30]}]),e.set("enable",[{from:[0,30],to:[7,30]}]),disableCollection=[{from:[2,0],to:[10,30]},{from:[0,30],to:[7,30],inverted:!0}],deepEqual(e.get("disable"),disableCollection,"Inverted range before and within disabled range"),t.find("[data-pick]").each(function(e,t){e>15&&e<=21?ok($(t).hasClass($.fn.pickatime.defaults.klass.disabled),"Time is disabled: "+t.innerHTML):ok(!$(t).hasClass($.fn.pickatime.defaults.klass.disabled),"Time is enabled: "+t.innerHTML)}),e.set("disable",!1),e.set("disable",[{from:[2,0],to:[10,30]}]),e.set("enable",[{from:[7,30],to:[14,0]}]),disableCollection=[{from:[2,0],to:[10,30]},{from:[7,30],to:[14,0],inverted:!0}],deepEqual(e.get("disable"),disableCollection,"Inverted range after and within disabled range"),t.find("[data-pick]").each(function(e,t){e>=4&&e<15?ok($(t).hasClass($.fn.pickatime.defaults.klass.disabled),"Time is disabled: "+t.innerHTML):ok(!$(t).hasClass($.fn.pickatime.defaults.klass.disabled),"Time is enabled: "+t.innerHTML)})}),test("`disable` and `enable` repeatedly",function(){var e,t=new Date(2014,3,20,4,30),i=this.picker,a=[[14,0],[16,30],new Date(2014,3,20,22),1,{from:[3,0],to:[7,30]},{from:[6,0],to:[11,30]}];i.set("disable",a),i.set("disable",a),deepEqual(i.get("disable"),a,"Collection without duplicates"),e=[[16,30],[22,0],t,[1,30],{from:[6,0],to:[11,30]}],i.set("enable",e),a=[[14,0],1,{from:[3,0],to:[7,30]},[1,30,"inverted"],{from:[6,0],to:[11,30],inverted:!0}],deepEqual(i.get("disable"),a,"Collection enabled various values"),i.set("enable",e),deepEqual(i.get("disable"),a,"Collection without duplicates"),e=a,i.set("enable",e),deepEqual(i.get("disable"),[],"Collection cleared - including inverted range overlaps"),i.set("enable",e),deepEqual(i.get("disable"),[],"Collection kept clear")}),module("Time picker `set` beyond limits",{setup:function(){$DOM.append($INPUT.clone());var e=$DOM.find("input").val("5:30 a.m.").pickatime({min:[2,30],max:[17,0]});this.picker=e.pickatime("picker")},teardown:function(){this.picker.stop(),$DOM.empty()}}),test("`select`",function(){var e=this.picker;e.set("select",[1,0]),deepEqual(e.get("select"),e.get("min"),"Able to not `select` beyond lower limit"),e.set("select",[19,0]),deepEqual(e.get("select"),e.get("max"),"Able to not `select` beyond upper limit")}),test("`highlight`",function(){var e=this.picker;e.set("highlight",[1,0]),deepEqual(e.get("highlight"),e.get("min"),"Able to not `highlight` beyond lower limit"),e.set("highlight",[19,0]),deepEqual(e.get("highlight"),e.get("max"),"Able to not `highlight` beyond upper limit")}),test("`view`",function(){var e=this.picker;e.set("view",[1,0]),deepEqual(e.get("view"),e.get("min"),"Able to not `view` beyond lower limit"),e.set("view",[19,0]),deepEqual(e.get("view"),e.get("max"),"Able to not `view` beyond upper limit")}),module("Time picker `set` outsite interval scope",{setup:function(){$DOM.append($INPUT.clone());var e=$DOM.find("input").pickatime();this.picker=e.pickatime("picker")},teardown:function(){this.picker.stop(),$DOM.empty()}}),test("`select`",function(){var e=this.picker;e.set("select",[1,10]);var t=e.get("select");deepEqual([t.hour,t.mins],[1,30],"Scoped `select` into interval range"),e.set("select",[19,49]),t=e.get("select"),deepEqual([t.hour,t.mins],[20,0],"Scoped `select` into interval range")}),test("`highlight`",function(){var e=this.picker;e.set("highlight",[1,10]);var t=e.get("highlight");deepEqual([t.hour,t.mins],[1,30],"Scoped `highlight` into interval range"),e.set("highlight",[19,49]),t=e.get("highlight"),deepEqual([t.hour,t.mins],[20,0],"Scoped `highlight` into interval range")}),test("`view`",function(){var e=this.picker;e.set("view",[1,10]);var t=e.get("view");deepEqual([t.hour,t.mins],[1,30],"Scoped `view` into interval range"),e.set("view",[19,49]),t=e.get("view"),deepEqual([t.hour,t.mins],[20,0],"Scoped `view` into interval range")}),module("Time picker mouse events",{setup:function(){$DOM.append($INPUT.clone());var e=$DOM.find("input").pickatime();this.picker=e.pickatime("picker")},teardown:function(){this.picker.stop(),$DOM.empty()}}),test("Select",function(){for(var e=this.picker,t=e.$root,i=e.get("interval"),a=0;a<48;a+=1)t.find("."+$.fn.pickatime.defaults.klass.listItem).eq(a).click(),strictEqual(e.get("select").pick,a*i,"Selected "+e.get("select","h:i A")),strictEqual(e.get("value"),e.get("select","h:i A"),"Input value updated to "+e.get("value"))}),test("Clear",function(){var e=this.picker;e.set("select",[2,0]),strictEqual(e.get("value"),e.get("select",$.fn.pickatime.defaults.format),"Value updated"),e.open(),e.$root.find("."+$.fn.pickatime.defaults.klass.buttonClear).click(),strictEqual(e.get("value"),"","Value cleared")}),module("Time picker keyboard events",{setup:function(){$DOM.append($INPUT.clone());var e=$DOM.find("input").pickatime();this.picker=e.pickatime("picker")},teardown:function(){this.picker.stop(),$DOM.empty()}}),test("Select",function(){for(var e=this.picker,t=e.$holder,i=0;i<48;i+=1)e.open(),e.set("highlight",30*i),t.trigger({type:"keydown",keyCode:13}),deepEqual(e.get("select"),e.get("highlight"),"Select updated to: "+e.get("select","HH:i"))}),test("Highlight",function(){var e=this.picker,t=e.$holder;e.open(),e.set("highlight",0);for(var i=1;i<48;i+=1)t.trigger({type:"keydown",keyCode:40}),strictEqual(e.get("highlight").pick,30*i,"Key “down” to `highlight`: "+e.get("highlight","h:i A")),deepEqual(e.get("view"),e.get("highlight"),"Updated `view`");for(var a=2;a<49;a+=1)t.trigger({type:"keydown",keyCode:38}),strictEqual(e.get("highlight").pick,1440-30*a,"Key “up” to `highlight`: "+e.get("highlight","h:i A")),deepEqual(e.get("view"),e.get("highlight"),"Updated `view`");for(var l=1;l<48;l+=1)t.trigger({type:"keydown",keyCode:39}),strictEqual(e.get("highlight").pick,30*l,"Key “right” to `highlight`: "+e.get("highlight","h:i A")),deepEqual(e.get("view"),e.get("highlight"),"Updated `view`");for(var s=2;s<49;s+=1)t.trigger({type:"keydown",keyCode:37}),strictEqual(e.get("highlight").pick,1440-30*s,"Key “up” to `highlight`: "+e.get("highlight","h:i A")),deepEqual(e.get("view"),e.get("highlight"),"Updated `view`")}),module("Time picker with a visible value",{setup:function(){$DOM.append($INPUT.clone().val("2:00 p.m."));var e=$DOM.find("input").pickatime();this.picker=e.pickatime("picker")},teardown:function(){this.picker.stop(),$DOM.empty()}}),test("`value` to select, highlight, and view",function(){var e=this.picker;ok(!e._hidden,"No hidden input"),strictEqual(e.get("select").pick,840,"Selects time"),strictEqual(e.get("highlight").pick,840,"Highlights time"),strictEqual(e.get("view").pick,840,"Viewsets time")}),module("Time picker with a hidden value",{teardown:function(){$DOM.empty()}}),test("`value` to select, highlight, and view",function(){$DOM.append($INPUT.clone().val("2:00 p.m."));var e=$DOM.find("input").pickatime({formatSubmit:"HH:i"}).pickatime("picker");ok(e._hidden,"Has hidden input"),strictEqual(e._hidden.value,"14:00","Hidden input value"),strictEqual(e.get("select").pick,840,"Selects time"),strictEqual(e.get("highlight").pick,840,"Highlights time"),strictEqual(e.get("view").pick,840,"Viewsets time")}),test("`data-value` to select, highlight, and view",function(){$DOM.append($INPUT.clone().data("value","14:00"));var e=$DOM.find("input").pickatime({formatSubmit:"HH:i"}).pickatime("picker");ok(e._hidden,"Has hidden input"),strictEqual(e._hidden.value,"14:00","Hidden input value"),strictEqual(e.get("select").pick,840,"Selects time"),strictEqual(e.get("highlight").pick,840,"Highlights time"),strictEqual(e.get("view").pick,840,"Viewsets time")});